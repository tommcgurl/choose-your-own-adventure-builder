# Choose Your Own Adventure Builder

## Structure of JSON

### Table of Contents

- Story Building Docs

  - [Adventure ID](#adventure_id--uuid)
    - [Authors](#authors--array)
    - [Blurb](#blurb--Draft.js%20text)
    - [Cover Image](#coverImage--string)
    - [First Part ID](<#firstPartId--string(uuid)>)
    - [Genre](#genre--object)
    - [Published](#published?--date)
    - [Story Parts](#storyParts--object)
      - [Story Part](#storyPart--object)
    - [Title](#title--string)

- [Draft.js Info](#Draft.js%20Info)

### `adventure_id` : `uuid`

The top level JSON key for any given adventure is a _unique id_ generated by `uuid`.

- Example:

```json
628a1033-82c9-4939-a98f-d2a015b5a295 : {
  "authors": [ ... ],
  "blurb": { ... },
  "coverImage": "url",
  "firstPartId": "uuid",
  "genre": { ... },
  "published": null || "Date ISO string",
  "storyParts": { ... },
  "title": "title"
}
```

### `authors` : `Array`

An array that contains all of the authors of a given adventure.

- Example:

```json
authors : [
  {"username" : "author 1"},
  {"username" : "author 2"},
]
```

### `blurb` : Draft.js text

The `blurb` is a short description of the adventure to the reader.

Example: _Navigate the terrors of a haunted house and escape with your life... if you make the correct decisions. This adventure is dark and spooky and contains thematic elements of ghostly behavior and untimely demises._

The `blurb` will be shown on the adventure's cover page, and serves as the reader's first exposure to the adventure. From the cover page, the reader may then choose to **Embark** upon the adventure. The blurb page is where the author will select the story part from which readers will start the adventure.

The text is stored in `blocks` by Draft.js and additional formatting is kept in `entityMap`.

For more info on Draft.js and what `blocks` and `entityMap` are, [click here](#Draft.js%20Info).

- Example:

```json
  blurb : {
    "blocks" : [ ... ],
    "entityMap" : { ... }
  }
```

### `coverImage` : `String`

Every adventure will have a cover image. For now, we are storing a URL string that links to the picture the author would like to use for their adventure.

- Example:

```json
coverImage : "https://i.imgur.com/A72umQC.jpg"
```

### `firstPartId` : `string(uuid)`

When the author selects an entry point for their adventure from the Blurb screen, the `uuid` of that `storyPart` is stored as the value to `firstPartId` as a string

- Example:

```json
firstPartId : "29a5f47b-3d86-4ec5-8e7a-f49744e4811f"
```

### `genre` : `Object`

The genre of the adventure. This will tell the reader what kind of adventure this is.

- Each `genre` object has

  - A `description` that is a brief description of what kind of stories fit into the genre.
  - An `id` that is an integer corresponding to the genre; essentially an `enum`.
  - A `name` that is the name of the genre

- Example:

```json
genre : {
  "description": "The Horror genre is replete with tales of the macabre. Oftentimes supernatural in nature, the purpose of these adventures is to invoke terror in the reader. Whether you are being chased by an insane killer, haunted by a vengeful poltergeist, or possessed by a demon, adventures in the Horror genre ratchet up tension with each choice you make and use your fear against you. Common elements include: blood/gore/body horror; ghosts, poltergeists, or demons; zombies, werewolves, vampires, and other supernatural beings.",
  "id": 4,
  "name": "Horror"
}
```

### `published?` : `Date`

An author may choose to _publish_ their adventure, i.e. make it available for consumption to readers. Until it is published, each adventure is considered a _draft_.

While the draft remains unpublished, `published` will be `null`:

```json
published: null
```

Once the draft is published, and becomes an adventure, published will be a `Date` ISO string whose value is when the adventure was published.

```json
published: "1987-09-13T21:36:00.000Z"
```

### `storyParts` : `Object`

This object represents the different _branches_ of your story. The branch keys should each be a _unique ID_ for linking story branches.

- Example `storyParts` object:

```
"storyParts" : {
      "0dc63a29-b228-4a74-862e-97daa0443fb7" : { ... },
      "9061743e-1794-4d54-86d5-8efc2d0a6e03" : { ... },
      "f5d82d9e-64e1-4a04-93a5-a5d8d25f87d8" : { ... }
    }
```

- ### `storyPart` : `Object`
- Each _branch_ of your story is a `storyPart` object. That object should contain the following properties:

  - A `name` property that is a string of text the author will see when linking to this `storyPart`.
    - Example:
    ```
    "name": "Entrance"
    ```
  - A `plot` object that is the story text for this branch. Similar to the `blurb`, this is stored by Draft.js as `blocks` and `entityMap`.
    - Example:
    ```
    "plot": {
      "blocks": [ ... ],
      "entityMap": { ... }
    }
    ```
  - An optional `prompt` object containing user choices that direct the reader to different branches.

    - The `prompt` object contains two properties:
      - `text` : `String`
        - The text prompting a user to make a decision.
        - Example:
        ```
        "text" : "Do you want to walk down the hallway or open the door?"
        ```
        - `choices` : `Array`
          - This would be an Array of `choice` objects.
          - The `choice` object should contain the following properties:
            - `text` : `String`
              - The text explaining the choice
              - For example:
              ```
              "text" : "Open the door!"
              ```
            - `nextBranch` : `String ( Branch ID )`
              - This should be the ID of the branch you would like to transition to next.
              - For example:
              ```
              "nextBranch" : "9061743e-1794-4d54-86d5-8efc2d0a6e03"
              ```
            - `nextBranchName` : `String`
              - The author-created name for the branch.
              - This is what the author sees in the branch selector dropdown
              - Example:
              ```
              "nextBranchName" : "Open door 1"
              ```
          - An example choices array:
            ```
            "choices" : [
              {
                "text": "Open the Door!",
                "nextBranch": "9061743e-1794-4d54-86d5-8efc2d0a6e03",
                "nextBranchName": "Open door 1"
              },
              {
                "text": "Walk down the hallway",
                "nextBranch": "0dc63a29-b228-4a74-862e-97daa0443fb7",
                "nextBranchName": "Walk Down Hallway 1"
              },
              {
                "text": "Curl into a ball and rock back and forth while crying",
                "nextBranch": "f5d82d9e-64e1-4a04-93a5-a5d8d25f87d8",
                "nextBranchName": "The End"
              }
            ]
            ```

  - Example `storyParts` object

  ```
  "storyParts" : {
    "0dc63a29-b228-4a74-862e-97daa0443fb7" : {
      "name" : "Entrance",
      "plot" : {
        "blocks" : { ... },
        "entityMap" : { ... }
      },
      "prompt" : {
        "text" : "What would you like to do?",
        "choices" : [
          {
            "text": "Open the Door!",
            "nextBranch": "9061743e-1794-4d54-86d5-8efc2d0a6e03",
            "nextBranchName": "Open door 1"
          },
          {
            "text": "Walk down the hallway",
            "nextBranch": "0dc63a29-b228-4a74-862e-97daa0443fb7",
            "nextBranchName": "Walk Down Hallway 1"
          },
          {
            "text": "Curl into a ball and rock back and forth while crying",
            "nextBranch": "f5d82d9e-64e1-4a04-93a5-a5d8d25f87d8",
            "nextBranchName": "The End"
          }
        ]
      }
    },
    "9061743e-1794-4d54-86d5-8efc2d0a6e03" : {
      "name" : "Open door 1",
      "plot" : {
        "blocks" : { ... },
        "entityMap" : { ... }
      },
      "prompt" : {
        "text" : "You open the door and you see...",
        "choices" : [
          {
            "text": "Close the door!",
            "nextBranch": "67bdeddd-f888-4879-a73f-c796f0cabde5",
            "nextBranchName": "Close door"
          },
          {
            "text": "Fight the monster!",
            "nextBranch": "2289dcc0-1f77-4d85-bfeb-2584bf95cc5f",
            "nextBranchName": "Fight monster"
          }
         ]
      }
    },
    "f5d82d9e-64e1-4a04-93a5-a5d8d25f87d8" : {
      "name" : "The End",
      "plot" : { ... },
    }
  }
  ```

### `title` : `String`

The title of the adventure.

- Example:

```
"title": "One Story to Rule Them All"
```

### Draft.js Info

[Draft.js](https://draftjs.org/) uses `blocks` and `entityMap` to store text and formatting for the author.

- `blocks`
  - `Array` : Every `block` is an object managed by Draft.js and contains a block of text as well as its formatting options.
