# Choose Your Own Adventure Builder

## Structure of JSON

### Table of Contents

- Story Building Docs
  - [Adventure ID](#adventure_id--uuid)
    - [Authors](#authors--array)
    - [Blurb](#blurb--Draft.js%20text)
    - [Cover Image](#coverImage--string)
    - [First Part ID](<#firstPartId--string(uuid)>)
    - [Genre](#genre--object)
    - [Published](#published?--date)
    - [Story Parts](#storyParts--object)
      - [plot](#plot)
      - [next](#next)
      - [character_modifier](#character-modifier)
      - [prompt](#prompt)
        - [text](#prompt-text)
        - [choices](#prompt-choices)
        - [no-choice](#no-choice)
      - [Example Story Part object](#example-story-part)

### `adventure_id` : `uuid`

The top level JSON key for any given adventure is a _unique id_ generated by `uuid`.

- Example:

```json
628a1033-82c9-4939-a98f-d2a015b5a295 : { ...adventure }
```

### `authors` : `Array`

An array that contains all of the authors of a given adventure.

- Example:

```json
authors : [
  {"username" : "author 1"},
  {"username" : "author 2"},
]
```

### `blurb` : Draft.js text

The `blurb` is a short description of the adventure to the reader.

Example: _Navigate the terrors of a haunted house and escape with your life... if you make the correct decisions. This adventure is dark and spooky and contains thematic elements of ghostly behavior and untimely demises._

The `blurb` will be shown on the adventure's cover page, and serves as the reader's first exposure to the adventure. From the cover page, the reader may then choose to **Embark** upon the adventure. The blurb page is where the author will select the story part from which readers will start the adventure.

The text is stored in `blocks` by Draft.js and additional formatting is kept in `entityMap`.

For more info on Draft.js and what `blocks` and `entityMap` are, [click here](#Draft.js%20Info).

- Example:

```json
  blurb : {
    "blocks" : [ ... ],
    "entityMap" : { ... }
  }
```

### `coverImage` : `String`

Every adventure will have a cover image. For now, we are storing a URL string that links to the picture the author would like to use for their adventure.

- Example:

```json
coverImage : "https://i.imgur.com/A72umQC.jpg"
```

### `firstPartId` : `string(uuid)`

When the author selects an entry point for their adventure from the Blurb screen, the `uuid` of that `storyPart` is stored as the value to `firstPartId` as a string

- Example:

```json
firstPartId : "29a5f47b-3d86-4ec5-8e7a-f49744e4811f"
```

### `genre` : `Object`

The genre of the adventure. This will tell the reader what kind of adventure this is.

- Example:

```json
genre : {
  "description": "The Horror genre is replete with tales of the macabre. Oftentimes supernatural in nature, the purpose of these adventures is to invoke terror in the reader. Whether you are being chased by an insane killer, haunted by a vengeful poltergeist, or possessed by a demon, adventures in the Horror genre ratchet up tension with each choice you make and use your fear against you. Common elements include: blood/gore/body horror; ghosts, poltergeists, or demons; zombies, werewolves, vampires, and other supernatural beings.",
  "id": 4,
  "name": "Horror"
}
```

### `published?` : `Date`

An author may choose to _publish_ their adventure, i.e. make it available for consumption to readers. Until it is published, each adventure is considered a _draft_.

While the draft remains unpublished, `published` will be `null`:

```json
published: null
```

Once the draft is published, and becomes an adventure, published will be a `Date` ISO string whose value is when the adventure was published.

```json
published: "1987-09-13T21:36:00.000Z"
```

### `storyParts` : `Object`

This object represents the different _branches_ of your story. Their key should be a _unique ID_ for linking story branches.

Each _branch_ of your story is an object. That object should contain the following properties:

- A `name` property that is a string of text the author will see when linking to this `storyPart`.
- An optional `prompt` object containing user choices that direct the reader to different branches.
  - The `prompt` object contains two properties:
    - `text` : `String`
- A `plot` object that is the story text for this branch. Similar to the `blurb`, this is stored by Draft.js as `blocks` and `entityMap`.
- Example `story_parts` object

```
"storyParts" : {
  "0dc63a29-b228-4a74-862e-97daa0443fb7" : {
    "name" : "Walk down hallway 1",
    "plot" : { ... },
    "prompt" : {
      "text" : "You walk down the hallway...",
      "choices" : [ ... ]
    }
  },
  "9061743e-1794-4d54-86d5-8efc2d0a6e03" : {
    "name" : "Open door 1",
    "plot" : { ... },
    "prompt" : {
      "text" : "You open the door and you see...",
      "choices" : [ ... ]
    }
  },
  "f5d82d9e-64e1-4a04-93a5-a5d8d25f87d8" : {
    "name" : "The End",
    "plot" : { ... },
  }
}
```

-


      - `text` : `String` <a name="prompt-text"></a>
        - The text prompting the user to make a decision.
        - For example:
          ```
          "text":
                "Do you open the door,
                 or try to find another way around?"
          ```
      - `choices` : `Array` <a name="prompt-choices"></a>

        - This would be an Array of `choice` objects.
        - The `choice` object should contain the following properties:

          - `text` : `String`
            - The text explaining the choice
            - For example:
            ```
            "text" : "Open the door!"
            ```
          - `next_branch` : `String ( Branch ID )`
            - This should be the ID of the branch you would like to transition to next.
            - For example:
            ```
            "next_branch" : "open_door_1"
            ```
          - `item_requirement` : `String ( Branch ID )`
            - Some choices may require the adventurer has a certain item.
            - This property should be the unique ID of the required item.
            - If the user does not have this item, this option is not shown.

        - An example `choices` array:

        ```
        "choices" : [
            {
              "text": "Open the Door!",
              "next_branch": "open_door_1"
            },
            {
              "text": "Find another way around!",
              "next_branch": "find_way_around_1"
            },
            {
              "text": "Curl into a ball and rock back and forth while crying",
              "next_branch": "horrifying_conclusion"
            }
        ]
        ```

      - `no_choice` : `Object ( Choice Object )` : `optional` <a name="no-choice"></a>
        - If for some reason the user's list of options is limited to (maybe due to lack of items), this choice will be automatically selected.
        - It should also contain a `text` and `next_branch` property.

- `character_modifier` : `Object` : `optional` <a name="character-modifier"></a>
  - This is an object representing a change that should occur to the character.
  - The object should contain two properties
    - `attribute`: `String (AttributeID)`
      - This is the attribute you want to modify
    - `modifier` : `Number`
      - This is a number that will be **added** to the corresponding
        character attribute.
    - Here is an example of a `character_modifier`
    ```
    "character_modifier": {
        "attribute": "health",
        "modifier": -100
    },
    ```
- Here is an example a `story-part` object: <a name="example-story-part"></a>

```
"walk_down_hallway_1": {
  "plot": "You stumble down the hallway, the sounds of their breathing not far behind you! You see a door ahead. You do not see any light coming out from the bottom of the door, only darkness.",
  "prompt": {
    "text": "Do you go through the door, or keep going and try to find another way out!?",
    "choices": [
      {
        "text": "Open the Door!",
        "next_branch": "open_door_1"
      },
      {
        "text": "Keep running and try to find another way out!",
        "next_branch": "find_another_way_out_1"
      },
      {
        "text": "Curl into a ball and rock back and forth while crying.",
        "next_branch": "horrifying_conclusion"
      },
      {
        "text": "Quickly look at map to find out where door leads.",
        "item_requirement": "map",
        "next_branch": "check_map_1"
      }
    ]
  }
}
```

#### `first_part` : `String (Branch ID)`

This should be the ID of the branch you would like the story to start on.

#### `color_palette` : `Object`

This section allows you to set some basic styling within the app (Very limited right now).
See the following guide for what color formats are supported https://facebook.github.io/react-native/docs/colors.html

- `background` : `Color`
- `main_text` : `Color`
- `sub_text` : `Color`
- An exampled `color_palette` object looks like:

```
"color_palette" : {
  "background": "#444",
  "main_text": "#FFF",
  "sub_text": "#AAA"
}
```

See the following screenshot to see how these values are applied.
![Example App with Colors applied](screenshots/colorPaletteExample.png)

<!-- TODO: Update this -->

### Draft.js Info

[Draft.js](https://draftjs.org/) uses `blocks` and `entityMap` to store text and formatting for the author.

- `blocks`
  - `Array` : Every `block` is an object managed by Draft.js and contains a block of text as well as its formatting options.
